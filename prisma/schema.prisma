generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model subscriptions {
  id                           Int            @id @default(autoincrement())
  user_id                      Int?
  paddle_subscription_id       String
  paddle_customer_id           String
  status                       String
  plan                         String
  next_bill_date               DateTime?      @db.Date
  cancel_url                   String?
  update_url                   String?
  trial_end                    DateTime?      @db.Timestamp(6)
  paused_at                    DateTime?      @db.Timestamp(6)
  canceled_at                  DateTime?      @db.Timestamp(6)
  created_at                   DateTime?      @default(now()) @db.Timestamp(6)
  updated_at                   DateTime?      @default(now()) @db.Timestamp(6)
  current_billing_period_start DateTime?      @db.Date
  current_billing_period_end   DateTime?      @db.Date
  users                        users?         @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  transactions                 transactions[]
}

model users {
  id                 Int             @id @default(autoincrement())
  email              String
  name               String?
  paddle_customer_id String?
  created_at         DateTime?       @default(now()) @db.Timestamp(6)
  subscriptions      subscriptions[]
  transactions       transactions[]
}

model transactions {
  id                    Int            @id @default(autoincrement())
  user_id               Int?
  subscription_id       Int?
  paddle_transaction_id String?
  amount                Decimal?       @db.Decimal
  currency              String?
  status                String?
  paid_at               DateTime?      @db.Timestamp(6)
  receipt_url           String?
  payment_method        String?
  brand                 String?
  last4                 String?
  created_at            DateTime?      @default(now()) @db.Timestamp(6)
  subscriptions         subscriptions? @relation(fields: [subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "payments_subscription_id_fkey")
  users                 users?         @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "payments_user_id_fkey")
}
